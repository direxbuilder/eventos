<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gerenciador de Eventos</title>
    
    <!-- Implementa√ß√£o expl√≠cita de pol√≠tica de permiss√µes -->
    <!-- Desativa explicitamente todas as permiss√µes sens√≠veis que n√£o s√£o necess√°rias -->
    <meta http-equiv="Permissions-Policy" content="
        accelerometer=(),
        autoplay=(),
        camera=(),
        encrypted-media=(),
        geolocation=(),
        gyroscope=(),
        magnetometer=(),
        microphone=(),
        midi=(),
        payment=(),
        usb=(),
        screen-wake-lock=(),
        web-share=()
    ">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .responsive-iframe {
            flex: 1;
            width: 100%;
            height: 100%;
            border: none;
            background-color: transparent;
        }
    </style>
</head>
<body>
    <div class="container">
        <iframe 
            id="appFrame"
            class="responsive-iframe"
            src="https://script.google.com/macros/s/AKfycbwB5PJYIGd0PpxLXuZy_vQOpfdNy3a8Jn8bnQoux8b15X0cmCHB0sLEMujx12Rcdca1/exec"
            allow="geolocation"
            allow="autoplay"
            frameborder="0"
            allowfullscreen="true"
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox"
            scrolling="no"
        ></iframe>
    </div>
    
    <script>
        /**
         * Sistema de supress√£o seletiva para mensagens de erro residuais
         * Mesmo com as pol√≠ticas de permiss√µes corretamente definidas, 
         * o iframe de GAS pode gerar alguns alertas devido √† natureza do
         * ambiente Google Apps Script
         */
        (function() {
            const originalConsoleWarn = console.warn;
            const originalConsoleError = console.error;
            
            // Lista de recursos para os quais definimos explicitamente a pol√≠tica "none"
            const explicitlyBlockedFeatures = [
                'accelerometer',
                'autoplay',
                'camera',
                'encrypted-media',
                'geolocation',
                'gyroscope',
                'magnetometer',
                'microphone', 
                'midi',
                'payment',
                'usb',
                'screen-wake-lock',
                'web-share'
            ];
            
            // Filtro para avisos
            console.warn = function(...args) {
                if (args.length > 0 && typeof args[0] === 'string') {
                    // Verifica se o aviso est√° relacionado a uma pol√≠tica de permiss√£o para um recurso bloqueado
                    if (args[0].includes('Permissions-Policy') || args[0].includes('permission policy')) {
                        // Verifica se o aviso est√° relacionado a um dos recursos explicitamente bloqueados
                        if (explicitlyBlockedFeatures.some(feature => 
                            args[0].toLowerCase().includes(feature.toLowerCase()))) {
                            return; // Suprime a mensagem
                        }
                    }
                    
                    // Suprime avisos gen√©ricos de viola√ß√£o de pol√≠tica
                    if (args[0].includes('[Violation]') && args[0].includes('not allowed in this document')) {
                        return;
                    }
                }
                return originalConsoleWarn.apply(console, args);
            };
            
            // Filtro similar para erros
            console.error = function(...args) {
                if (args.length > 0 && typeof args[0] === 'string') {
                    if (args[0].includes('Permissions-Policy') || args[0].includes('permission policy')) {
                        if (explicitlyBlockedFeatures.some(feature => 
                            args[0].toLowerCase().includes(feature.toLowerCase()))) {
                            return;
                        }
                    }
                    
                    if (args[0].includes('[Violation]') && args[0].includes('not allowed in this document')) {
                        return;
                    }
                }
                return originalConsoleError.apply(console, args);
            };
            
            // Registro de eventos de carregamento para depura√ß√£o
            window.addEventListener('DOMContentLoaded', () => {
                const iframe = document.getElementById('appFrame');
                if (iframe) {
                    console.log('‚úÖ Iframe GAS carregado com sucesso');
                    
                    // Verifica se as pol√≠ticas de permiss√£o est√£o sendo aplicadas
                    try {
                        const permissions = document.featurePolicy?.features() || [];
                        console.log('üìã Recursos com pol√≠ticas definidas:', permissions);
                    } catch (e) {
                        console.log('‚ö†Ô∏è N√£o foi poss√≠vel verificar pol√≠ticas de permiss√£o:', e);
                    }
                }
            });
        })();
    </script>
</body>
</html>
